# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Данные и типы данных, используемых в приложении

Товар

```
export interface IProductItem {
    id: string;
    description : string;
    image : string;
    title : string;
    category: string;
    price : number;
}
```

Пользователь 

```
export interface IUser {
    payment : string;
    email : string;
    phone : string;
    address : string;
    total: number;
    items : IProductItem[];
}
```

Список товаров 

```
export interface IProductList {
    total: number;
    items: IProductItem[]
}
```
Данные списка товаров, используемые при формировании корзины

```
export type TProductList = IProductList;
```

Данные пользователя, в форме способа оплаты 

```
export type TPaymentMethod = Pick<IUser, 'payment' | 'address'>;
```

Основные данные пользователя 

```
export type TUserInfo = Pick<IUser, 'email' | 'phone'>;
```

Данные, используемые при завершении заказа

```
export type TOrder = Pick<IUser, 'total'>;
```


## Архитектура приложения 

Код разделен на слои согласно парадигме MVP:
- слой представления, отвечает  за отображение данных на странице,
- слой данных, отвечает за хранение и изменение данных
- презентер, отвечает за связь представления и данных.

## Базовый код

#### Класс Арі
Содержит в себе базовую логику отправки запросов. В конструктор передается базовый адрес сервера и опциональний объект с заголовками запросов.
Методы:
- `get` - выполняет GET запрос на переданный в параметрах сидпоинт и возвращает промис с объектом, которим ответил сервер
- `post` - принимает объект с данными, которые будут переданы в JSON в теле запроса, и отправляет эти данные на едпоинт переданный как параметр при визове метода. По умолчанию выполняется `POST` запрос, но метод запроса может быть переопределен заданием третьего параметра при вызове.

#### Класс EventEmitter
Брокер событий позволяет отправлять события и подписываться на события, происходящие в системе. Класс используется в презентере для обработки событий и в слоях приложения для генерации событий.
Основные методы, реализуемые классом описаны интерфейсом `IEvents`:
- `on` - подписка на событие
- `emit` - инициализация события
- `trigger` - возвращает функцию, при вызове которой инициализируется требуемое в параметрах событие

